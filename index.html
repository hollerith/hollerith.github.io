<!doctype html>
<html>

<head>
    <title>Progressive Web Apps Rock</title>
    <meta name="viewport" content="width=device-width, user-scalable=no" />

    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" type="text/css" href="main.css">

    <link rel="icon" href="icons/icon-192x192.png" type="image/png" />
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icons/apple-icon-167x167.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/apple-icon-152x152.png">

    <script src="newt.min.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(function (registration) {
                        console.log('Service Worker Registered', registration);
                    })
                    .catch(function (error) {
                        console.log('Service Worker Registration Failed', error);
                    });
            });
        }

        function createCard(item) {
            return {
                id: 'card',
                $type: 'div',
                class: 'card',
                $nodes: [
                    {
                        $type: 'img',
                        class: 'card--image',
                        src: item.image
                    },
                    {
                        $type: 'h1',
                        class: 'card--title',
                        $text: item.title
                    },
                    {
                        $type: 'a',
                        class: 'card--link',
                        href: '#',
                        $text: item.link
                    }
                ]
            };
        }

        const data = [
            {image: 'spam.png', title: 'Spam Title', link: 'Spam'},
            {image: 'eggs.png', title: 'Eggs Title', link: 'Eggs'},
            {image: 'ham.png', title: 'Ham Title', link: 'Ham'},
            {image: 'beans.png', title: 'Beans Title', link: 'Beans'}
        ];


        var root = {
            "$app": true,
            "id": "root",
            "$type": "main",
            "$nodes": [
                {
                    "$type": "nav",
                    "$nodes": [
                        {
                            "$type": "h1",
                            "$text": "PWA Rocks"
                        },
                        {
                            "$type": "ul",
                            "$nodes": [
                                {
                                    "$type": "li",
                                    "$text": "Home"
                                },
                                {
                                    "$type": "li",
                                    "$text": "About"
                                },
                                {
                                    "$type": "li",
                                    "$text": "Blog"
                                }
                            ]
                        }
                    ]
                },
                {
                    "$type": "div",
                    "class": "container",
                    "$nodes": data.map(function(item) {
                        return createCard(item);
                    }),
                }
            ]
        }

    </script>
</head>
<body>
    <noscript>
        Turn on JavaScript to access this site content.
    </noscript>
</body>
</html>